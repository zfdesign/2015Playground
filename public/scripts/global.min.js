var app={};Object.create?app.cloneObject=function(o){return Object.create(o)}:app.cloneObject=function(){var Fn=function(){};return function(o){return Fn.prototype=o,new Fn}}(),app.inherit=function(Sub,Super){Sub.prototype=app.cloneObject(Super.prototype),Sub.superConstructor=Super,Sub.prototype.constructor=Sub},app.EventEmitter=function(){this.events={}},app.EventEmitter.prototype.on=function(eventName,fn,context){this.events[eventName]||(this.events[eventName]={subscribers:[]}),this.events[eventName].subscribers.push({fn:fn,context:context||null})},app.EventEmitter.prototype.fire=function(eventName){var subscribers;if(this.events[eventName]){subscribers=this.events[eventName].subscribers;for(var argumentsExceptFirst=Array.prototype.slice.call(arguments,1),i=subscribers.length-1;i>=0;i--)try{subscribers[i].fn.apply(subscribers[i].context,argumentsExceptFirst)}catch(e){}}},app.FormValidator=function(form){this.form=form,this.errors=[],this.validators=[]},app.FormValidator.prototype.addValidator=function(fieldName,rules){var rule,i,exceptionMessageRules="Invalid rules. Must provide be an array of rules (at least 1).",field=this.form.elements[fieldName];if(!field)throw"Invalid form field.";if(!rules)throw exceptionMessageRules;if(!rules.length)throw exceptionMessageRules;if(rules.length)for(i=0;i<rules.length;i++)if(rule=rules[i],"function"!=typeof rule.method||"string"!=typeof rule.message)throw exceptionMessageRules;this.validators.push({fieldName:fieldName,rules:rules,field:field})},app.FormValidator.prototype.validate=function(){this.errors=[];var i,j,validator=null,validatorValid=!0;for(i=0;i<this.validators.length;i++)for(validator=this.validators[i],j=0;j<validator.rules.length;j++)if(validatorValid=validator.rules[j].method(validator.field,validator.rules[j].params),!validatorValid){this.errors.push({fieldName:validator.fieldName,message:validator.rules[j].message});break}return 0===this.errors.length},app.FormValidator.prototype.getErrors=function(){return this.errors},app.FormValidator.prototype.removeValidator=function(fieldName){var i;for(i=0;i<this.validators.length;i++)if(this.validators[i].fieldName===fieldName){this.validators.splice(i,1);break}},app.FormValidator.prototype.removeRuleFromValidator=function(fieldName,ruleFunction){var rules,rule,i,j,validator=null;for(i=0;i<this.validators.length;i++)if(validator=this.validators[i],validator.fieldName===fieldName){for(rules=validator.rules,j=0;j<rules.length;j++)if(rule=rules[j],rule.method===ruleFunction){rules.splice(j,1);break}break}},app.views={},app.views.BaseView=function(){app.views.BaseView.superConstructor.call(this)},app.inherit(app.views.BaseView,app.EventEmitter),app.controllers={};